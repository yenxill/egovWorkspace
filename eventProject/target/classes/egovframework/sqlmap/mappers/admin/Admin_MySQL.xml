<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="AdminDAO">

	<select id="selectBoardList" parameterType="java.util.HashMap" resultType="java.util.HashMap">
		SELECT  T.rnum,
				T.boardIdx,
		        T.boardTitle,
		        T.createId,
		        T.createDate,
		        T.updateId,
		        T.updateDate
		FROM (select    FORMAT(@rownum:=@rownum+1, 0) AS rnum,
						board_idx AS boardIdx,
						board_title As boardTitle,
						create_id AS createId,
						DATE_FORMAT(create_date, '%Y-%m-%d %H:%i:%s') AS createDate,
						update_id AS updateId,
						DATE_FORMAT(update_date, '%Y-%m-%d %H:%i:%s') AS updateDate
			from tb_board, (SELECT @rownum:=0 FROM dual) R
			WHERE 1=1
			AND use_yn = 'Y'
			<if test="searchKeyword != '' and searchKeyword != null and searchKeyword != 'undefined'">
				<if test="searchCondition == 'id'">
					AND create_id like concat('%',#{searchKeyword},'%')
				</if>
				<if test="searchCondition == 'title'">
					AND board_title like concat('%',#{searchKeyword},'%')
				</if>
			</if>
			ORDER BY create_date) T
		ORDER BY CAST(replace(T.rnum, ',', '') AS UNSIGNED) desc
		LIMIT #{recordCountPerPage} offset #{firstIndex}
	</select>
	
	

</mapper>